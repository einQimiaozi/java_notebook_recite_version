## OSI七层模型

1.物理层：传输电信号和原始比特流(二进制数据)
  - 常见应用：网线，集线器，网卡
  - 常见协议：IEEE，InternetWork

2.数据链路层：物理寻址，透明传输，封装成帧，差错检测，该层只能建立局域网之间的数据传输
  - 常见应用：网桥，交换机
  - 常见协议：PPP，ARP，RARP

3.网络层：通过路由建立跨网关之间的链接，将mac报文封装成ip数据报
  - 常见应用：路由器
  - 常见协议：ipv4,ipv6
  - 路由协议：r2p

4.传输层：对数据进行分组，提供端到端的可靠链接
  - 常见应用：网关
  - 常见协议：tcp,upd

5.会话层：管理传输层建立的端到端之间的会话和链接
  - 常见应用：网关
  - 常见协议：ssl，tls(安全协议)，RPC远程调用协议

6.表示层：对其上下层送来的数据进行解密，压缩，解码等，保证送到应用层的数据格式统一

7.应用层：对os和应用提供网络访问服务
  - 常见应用：网关
  - 常见协议：http，dns，ftp，dhcp，smtp，pop3

## TCP/IP四层模型

1.数据接口层：对应osi中的1,2层，提供tcp/ip协议和物理设备之间的交互接口
  - 常见协议：ARP，RARP

2.网络层：对应OSI中的网络层

3.传输层：对应OSI中的传输层

4.应用层：对应OSI的5,6,7层

## tcp和udp的区别

1.tcp首部20字节，udp首部8字节

2.tcp使用可靠全双工信道提供可靠传输服务，预先进行tcp三次握手，upd使用不可靠信道，目标是尽最大努力交付

3.tcp面向字节流，udp面向报文，所以tcp可能粘包

4.udp无拥塞处理机制，网络中出现阻塞时不会降低发送端的发送效率

5.tcp只支持点对点，udp支持点对点，一对多，多对多

## tcp三次握手

1.客户端和服务器创建TCB进程控制块，服务器进入监听状态等待客户端连接请求

2.客户端发出请求，seq=x(序列号)，syn置为1,tcp规定syc=1的报文不能携带数据，消耗一个序列号，一般用于建立连接和请求

3.服务器若同意连接则发出确认报文，seq=y，ack置为1且ack号=x+1

## tcp的数据传输控制机制

1.超时重传：使用RTO重传定时器，根据多次往返时间(RTT)的平均值确定RTO，如果出现超时(即未收到ack)，则认为报文丢失，重传(linux15次，windows5次)

2.流量控制：使用tcp滑动窗口规定每次传输的数据范围，只有收到确认ack后才移动窗口，并且接收端可以根据自己的情况设置窗口大小，从而进行流量控制

3.拥塞控制：
  - 1.慢开始：通过提前嗅探网络拥塞状况控制发送的数据量，从小到达依次慢慢增加拥塞窗口(拥塞窗口可以理解为滑动窗口)，每次增加双倍，初始大小为1
  - 2.拥塞避免：执行慢开始出现拥塞时，将拥塞阈值变为一半，并将拥塞窗口置为1,之后每次增加拥塞窗口+1而不是两倍
  - 3.快重传：发送方连续收到三个相同的ack确认后，则认为接收方出现了丢包(接收方发现丢包的话就向发送方连续发三个ack确认)，则停下其他报文的发送，优先将丢失的数据包重传后，再次恢复其他数据包的发送
  - 4.快恢复：发送方连续收到n(n>=3)个相同的ack确认后，将拥塞阈值减半，将拥塞窗口置为阈值+n,直到收到了新的ack后，再将拥塞窗口重置为阈值大小
