## 大数据去重

思路：

使用bitmap存储数据，比如40g的int类型，在32位的系统中每个int为8bit，假设机器只有8g，那么无法一次性读入处理

使用bitmap的话一个int只需要1bit就可以表示，总共只需要500mb（40 * 10^8 / 8 / 1000 / 1000）

并且bitmap由于使用二进制串的index来表示数字，所以自带去重和排序功能

bitmap取数字方法:

bitmap_len = bitmap长度，一般为8位
num = 待查询数字

res = int(num/bitmap_len)&(1<<(num%bitmap_len));

## 大数据查询

一般采用hash算法将大量数据映射到少量的hash槽中，每个hash槽对应一个文件，然后逐文件处理，比如求前k个最大数，就求出每个文件的前k个最大数，然后将每个文件进行对比后合并即可，这个过程中孩子要保证内存可以同时读入两个文件即可，可以使用多路归并进行优化

## 外排序

对于大数据排序可以使用外排序这种方法，假设内存中能存放n个数据，我们现在需要对k个数据进行排序，k=m*/n，可以将k分成m份存入磁盘，然后每次读入n个数据到内存进行排序(这部分你怎么排序都行，随便)，排序好后写回磁盘，处理m份数据后，进行多路归并，每次从每份文件里读取一个数，这样一次对m个数进行排序，既可以保证内存不爆，又可以减少二路归并的磁盘io次数(该方法也可以用于大数据查询和去重)
